# 2.7 加速动态请求

如果提供一个全球化的服务，用户来自世界各地，降低网络延迟的难度也随之增加。就像我们前文所说，使用技术手段无论如何优化总有物理瓶颈限制，这个情况我们换个思路，花钱绕过物理瓶颈远比进行技术投入收益大的多。

花钱的方式就是使用CDN服务商的动态加速网络（Dynamic Site Accelerator，DSA）服务。

动态加速网络通过在全球各地区部署加速节点，有效降低跨国访问延迟，保障海外加速效果，除了路由优化外，CDN 服务商也会有连接、传输等相关的策略调整。在应用层，像 TLS1.3、ECC 证书、QUIC 协议等等对服务有提升的技术都有尝试落地。目前主流的 CDN 服务商都提供加速服务，例如 Akamai、Fastly、Cloudfront、Azure 等等，这些服务商在全球各区域部署了近几十万台边缘设备，提供了可靠、稳定的加速服务。

使用动态加速网络流程大致如下。

- 源站提供一个 20KB 用于探测的资源
- 服务商会在源站周边选择一批候选边缘节点。
- 候选边缘节点对测试资源进行下载测试，多个候选边缘节点多路探索后，根据丢包率、RTT、hops数等选择最佳的路由线路。

<div  align="center">
	<img src="../assets/direct-connect-wecome-v1.1.jpg" width = "550"  align=center />
	<p>图 2-11：Akamai 加速服务</p>
</div>

动态加速网络能有效改善因跨运营商和跨国引发的网络延迟、丢包和服务不稳定等问题。笔者使用 Akamai 的加速服务，从抽样的数据看，整体连接速度提升了 30% 右，表2-4为测试数据，供读者参考。

表2-4 动态加速网络效果对比

区域|直连|Akamai加速|提升
:---|:--:|:--:|:--
Bangkok|0.58s|0.44|31%
jakarta|0.57s|0.44|31%
Kuala Lumpur|0.52s|0.38|36%
Taibei|0.51s|0.40|37%
Hanoi Bac Mai|0.54s|0.41|30%
Singapore|0.58s|0.39|48%
Hong Kong|0.38s|0.24|58%
Tokyo|0.60s|0.45s|32%
Surabaya|0.67s|0.52s|29%
Manila|0.46s|0.34s|36%


